<tal:page_with_sidebar_template define="page_with_sidebar_template load: page_with_sidebar_template.pt" metal:use-macro="page_with_sidebar_template">
<div metal:fill-slot='sidebar_nav'>
    <li class="nav-header">Cargos (${len(registered_cargos)})</li>
    <tal:cargos repeat="item doc_helper.get_registered_cargo_sorted_by_name()">
        <tal:cargo define="name item[0]; cargo item[1]">
            <li><a href="#${cargo.id}">${doc_helper.get_cargo_name(cargo)}</a></li>
        </tal:cargo>
    </tal:cargos>
</div>

<div metal:fill-slot='body'>
    <div class="page-header">
        <h2>Cargos</h2>
    </div>
    <tal:cargos repeat="item doc_helper.get_registered_cargo_sorted_by_name()">
        <tal:cargo define="name item[0]; cargo item[1]">
            <div id="${cargo.id}" tal:define="industries_using_cargo doc_helper.industries_using_cargo(cargo)">
                <h3>${doc_helper.get_cargo_name(cargo)} <small>Cargo</small></h3>
                <p class="muted">${doc_helper.get_cargo_extra_info(cargo)}</p>
                <tal:unused condition="len(industries_using_cargo) == 0">
                    <p>This cargo is currently unused in FIRS</p>
                </tal:unused>
                <tal:industries_using_cargo repeat="economy industries_using_cargo">
                    <table class="table table-bordered table-striped table-condensed">
                        <tbody>
                            <tr>
                                <th style="border-top:none; text-align:right; width:120px;">
                                    Economy:
                                </th>
                                <td style="border-top:none;">
                                    <strong>
                                        <a href="economies.html#${doc_helper.get_economy_name_char_safe(economy)}">
                                            ${doc_helper.get_economy_name(economy)}
                                        </a>
                                    </strong>
                                </td>
                            </tr>
                            <tr>
                                <th style="text-align:right; font-weight:normal;">Produced by:</th>
                                <td>
                                    <tal:produced_by repeat="produced_by industries_using_cargo[economy]['produced_by']">
                                        <a href="industries.html#${produced_by.id}">${' / '.join(doc_helper.get_industry_all_names(produced_by))}${(',', '')[repeat.produced_by.end]}</a>
                                    </tal:produced_by>
                                </td>
                            </tr>
                            <tr>
                                <th style="text-align:right; font-weight:normal;">Accepted by:</th>
                                <td>
                                    <tal:accepting_industries repeat="accepted_by industries_using_cargo[economy]['accepted_by']">
                                        <a href="industries.html#${accepted_by.id}">${' / '.join(doc_helper.get_industry_all_names(accepted_by))}${(',', '')[repeat.accepted_by.end]}</a>
                                    </tal:accepting_industries>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </tal:industries_using_cargo>
            </div>
            <br />
        </tal:cargo>
    </tal:cargos>
</div>
</tal:page_with_sidebar_template>
