<tal:page_with_sidebar_template metal:use-macro="load: main_template.pt">

<div metal:fill-slot='body'>
    <div class="row">
        <div class="col-xs-12">
            <div class="page-header text-center">
                <h2>Cargos (${len(registered_cargos)})</h2>
            </div>
        </div>
    </div>
    <div class="row">
        <div class="col-xs-12 col-sm-3" style="margin-top:22px;">
            <ul class="list-unstyled">
                <tal:cargos repeat="item doc_helper.get_registered_cargo_sorted_by_name()">
                    <tal:cargo define="name item[0]; cargo item[1]">
                        <li><a href="#${cargo.id}">${doc_helper.get_cargo_name(cargo)}</a></li>
                    </tal:cargo>
                </tal:cargos>
            </ul>
        </div>
        <div class="col-xs-12 col-sm-9">
            <tal:cargos repeat="item doc_helper.get_registered_cargo_sorted_by_name()">
                <tal:cargo define="name item[0]; cargo item[1]">
                    <div id="${cargo.id}">
                        <h3>${doc_helper.get_cargo_name(cargo)}</h3>
                        <p class="muted">${doc_helper.get_cargo_extra_info(cargo)}</p>
                        <tal:unused condition="doc_helper.cargo_is_unused_in_any_economy(cargo) and cargo.id != 'mail'">
                            <p>This cargo is currently unused in FIRS</p>
                        </tal:unused>
                        <table class="table table-striped table-condensed">
                            <thead>
                                <tr>
                                    <th>
                                        Economy
                                    </th>
                                    <th style="width:33%;">Produced by</th>
                                    <th style="width:33%;">Accepted by</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tal:economy repeat="economy registered_economies">
                                    <tr tal:condition="not: doc_helper.cargo_is_unused(cargo, economy)">
                                        <td style="border-top:none;">
                                            <strong>
                                                <a href="economies.html#${doc_helper.get_economy_name_char_safe(economy)}">
                                                    ${doc_helper.get_economy_name(economy)}
                                                </a>
                                            </strong>
                                        </td>
                                        <td>
                                            <tal:produced_by repeat="produced_by doc_helper.industries_producing_cargo(cargo, economy)">
                                                <a href="industries.html#${produced_by.id}">${' / '.join(doc_helper.get_industry_all_names(produced_by))}${(',', '')[repeat.produced_by.end]}</a>
                                            </tal:produced_by>
                                        </td>
                                        <td>
                                            <tal:accepting_industries repeat="accepted_by doc_helper.industries_accepting_cargo(cargo, economy)">
                                                <a href="industries.html#${accepted_by.id}">${' / '.join(doc_helper.get_industry_all_names(accepted_by))}${(',', '')[repeat.accepted_by.end]}</a>
                                            </tal:accepting_industries>
                                        </td>
                                    </tr>
                                </tal:economy>
                            </tbody>
                        </table>
                    </div>
                    <br />
                </tal:cargo>
            </tal:cargos>
        </div>
    </div>
</div>
</tal:page_with_sidebar_template>
