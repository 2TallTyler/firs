<tal:page_with_sidebar_template define="page_with_sidebar_template load: page_with_sidebar_template.pt" metal:use-macro="page_with_sidebar_template">

<div metal:fill-slot='sidebar_nav'>
    <li class="nav-header">Economies (${len(economies)})</li>
    <tal:economies repeat="economy doc_helper.get_economies_sorted_by_name()">
        <li><a href="#${doc_helper.get_economy_name_dom_safe(economy)}">${doc_helper.get_economy_name(economy)}</a></li>
    </tal:economies>
</div>

<div metal:fill-slot='body'>
    <div class="page-header">
        <h2>Economies</h2>
        <p>In FIRS, the Economy parameter setting controls which industries and cargos will be used in the game.</p>
    </div>
    <tal:economies repeat="economy doc_helper.get_economies_sorted_by_name()">
        <div id="${doc_helper.get_economy_name_dom_safe(economy)}">
            <h3>${doc_helper.get_economy_name(economy)} <small>Economy</small></h3>
            <p>${structure:doc_helper.get_economy_extra_info(economy)}</p>
            <br />
            <h4>${len(economy_schemas[economy].enabled_cargos)} Cargos</h4>
            <tal:industries repeat="cargo sorted(economy_schemas[economy].enabled_cargos, key=doc_helper.get_cargo_name)">
                <a href="cargos.html#${cargo.id}">${doc_helper.get_cargo_name(cargo)}${(',', '')[repeat.cargo.end]}</a>
            </tal:industries>

            <h4>${len(economy_schemas[economy].enabled_industries)} Industries</h4>
            <tal:industries repeat="industry sorted(economy_schemas[economy].enabled_industries, key=doc_helper.get_industry_name)">
                <a href="industries.html#${industry.id}">${doc_helper.get_industry_name(industry, economy)}${(',', '')[repeat.industry.end]}</a>
            </tal:industries>

            <h4>Cargo Flow</h4>
            <div style="margin-top: 10px; margin-bottom: 10px;">
                <object style="max-width:100%;" data="${economy.id}.dot.svg" type="image/svg+xml"></object>
            </div>

            <a class="btn" href="${economy.id}.dot.svg">View Cargo Flow Larger</a> <a class="btn" href="${economy.id}.dot">Download Cargo Flow as .dot</a>
        </div>
        <hr />
        <br />
    </tal:economies>
</div>
</tal:page_with_sidebar_template>
