<tal:page_with_sidebar_template define="page_with_sidebar_template load: page_with_sidebar_template.pt" metal:use-macro="page_with_sidebar_template">
<div metal:fill-slot='sidebar_nav'>
    <li class="nav-header">Cargos (${len(registered_cargos)})</li>
    <tal:cargos repeat="item doc_helper.get_registered_cargo_sorted_by_name()">
        <tal:cargo define="name item[0]; cargo item[1]">
            <li><a href="#${cargo.id}">${doc_helper.get_cargo_name(cargo)}</a></li>
        </tal:cargo>
    </tal:cargos>
</div>

<div metal:fill-slot='body'>
    <h2>Cargos</h2>
    <br />
    <tal:cargos repeat="item doc_helper.get_registered_cargo_sorted_by_name()">
        <tal:cargo define="name item[0]; cargo item[1]">
            <div id="${cargo.id}">
                <div class="page-header" style="overflow:hidden;">
                    <h3>${doc_helper.get_cargo_name(cargo)} <small>Cargo</small></h3>
                    <p class="muted">${doc_helper.get_cargo_extra_info(cargo)}</p>
                    <tal:unique_industry_combinations define="unique_industry_combinations doc_helper.cargo_unique_industry_combinations(cargo)">
                        <tal:economy_industry_map repeat="economy_industry_map unique_industry_combinations">
                            <table class="table table-condensed">
                                <tbody>
                                    <tr>
                                        <th style="border-top:none; text-align:right; width:120px;">
                                            ${('Economy','Economies')[len(unique_industry_combinations[economy_industry_map]['economies']) > 1]}:
                                        </th>
                                        <td style="border-top:none;">
                                            <tal:economies repeat="cargo_in_economy unique_industry_combinations[economy_industry_map]['economies']">
                                                <a href="economies.html#${cargo_in_economy}">${doc_helper.get_economy_name(cargo_in_economy)}</a>${(',', '')[repeat.cargo_in_economy.end]}
                                            </tal:economies>
                                        </td>
                                    </tr>
                                    <tr>
                                        <th style="text-align:right;">Produced by:</th>
                                        <td>
                                            <tal:producing_industries repeat="produced_by unique_industry_combinations[economy_industry_map]['produced_by']">
                                                <a href="industries.html#${produced_by.id}">${' / '.join(doc_helper.get_industry_all_names(produced_by))}</a>${(',', '')[repeat.produced_by.end]}
                                            </tal:producing_industries>
                                        </td>
                                    </tr>
                                    <tr>
                                        <th style="text-align:right;">Accepted by:</th>
                                        <td>
                                            <tal:accepting_industries repeat="accepted_by unique_industry_combinations[economy_industry_map]['accepted_by']">
                                                <a href="industries.html#${accepted_by.id}">${' / '.join(doc_helper.get_industry_all_names(accepted_by))}</a>${(',', '')[repeat.accepted_by.end]}
                                            </tal:accepting_industries>
                                        </td>
                                    </tr>
                                </tbody>
                            </table>
                        </tal:economy_industry_map>
                    </tal:unique_industry_combinations>
                </div>
                <br />
            </div>
        </tal:cargo>
    </tal:cargos>
</div>
</tal:page_with_sidebar_template>
